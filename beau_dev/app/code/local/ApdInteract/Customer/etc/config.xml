<?xml version="1.0"?>
<config>
    <modules>
        <ApdInteract_Customer>
            <version>0.7.0</version>
        </ApdInteract_Customer>
    </modules>
    <frontend>
        <routers>
            <customer>
                <args>
                    <modules>
                        <apdinteract_customer before="Mage_Customer">ApdInteract_Customer</apdinteract_customer>
                    </modules>
                </args>
            </customer>
        </routers>
        <layout>
            <updates>
                <apdInteract_customer>
                    <file>apdinteract_customer.xml</file>
                </apdInteract_customer>
            </updates>
        </layout>
    </frontend>
    <global>
        <rewrite>
            <customer_address_rewrite>
                <from><![CDATA[#^/account/contacts#]]></from>
                <to>/customer/address</to>
                <complete>1</complete>
            </customer_address_rewrite>
            <customer_address_edit_rewrite>
                <from><![CDATA[#^/account/contacts/edit/#]]></from>
                <to>/customer/address/edit/id/</to>
                <complete>1</complete>
            </customer_address_edit_rewrite>
            <customer_dashboard_rewrite>
                <from><![CDATA[#^/account/dashboard#]]></from>
                <to>/customer/account</to>
                <complete>1</complete>
            </customer_dashboard_rewrite>
            <customer_details_rewrite>
                <from><![CDATA[#^/account/details#]]></from>
                <to>/customer/account/edit</to>
                <complete>1</complete>
            </customer_details_rewrite>
            <customer_vehicle_rewrite>
                <from><![CDATA[#^/account/vehicles#]]></from>
                <to>/customer/vehicle</to>
                <complete>1</complete>
            </customer_vehicle_rewrite>
            <customer_mobility_rewrite>
                <from><![CDATA[#^/account/mobility#]]></from>
                <to>/customer/mobility</to>
                <complete>1</complete>
            </customer_mobility_rewrite>            
        </rewrite>
        <blocks>
            <customer>
                <rewrite>
                    <account_navigation>ApdInteract_Customer_Block_Customer_Account_Navigation</account_navigation>
                    <account_dashboard_address>ApdInteract_Customer_Block_Customer_Account_Dashboard_Address</account_dashboard_address>
                </rewrite>                
            </customer>
        </blocks>
        <helpers>
            <customer>
                <rewrite>
                    <data>ApdInteract_Customer_Helper_Url</data>
                </rewrite>
            </customer>

            <apdinteract_customer>
                <class>ApdInteract_Customer_Helper</class>
            </apdinteract_customer>
        </helpers>
        <resources>
            <apdinteract_customer_setup>
                <setup>
                    <module>ApdInteract_Customer</module>
                    <class>Mage_Customer_Model_Resource_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </apdinteract_customer_setup>
        </resources>
        <models>	        
            <apdinteract_Customer>
                <class>ApdInteract_Customer_Model</class>
            </apdinteract_Customer>
            <customer>
                <rewrite>
                    <customer>ApdInteract_Customer_Model_Customer</customer>
                </rewrite>
            </customer>
        </models>

        <events>		    
            <customer_save_after>
                <observers>
                    <apdinteract_customer_save_after>
                        <type>singleton</type>
                        <class>ApdInteract_Customer_Model_Observer</class>
                        <method>sendToBooking</method>
                    </apdinteract_customer_save_after>
                </observers>
            </customer_save_after>
            <customer_register_success>
                <observers>
                    <apdinteract_customer_register_success>
                        <type>singleton</type>
                        <class>ApdInteract_Customer_Model_Observer</class>
                        <method>sendToBooking</method>
                    </apdinteract_customer_register_success>
                </observers>
            </customer_register_success>
            <customer_login>
                <observers>
                    <apdinteract_customer_login>
                        <type>singleton</type>
                        <class>ApdInteract_Customer_Model_Observer</class>
                        <method>validateCustomerLogin</method>
                    </apdinteract_customer_login>
                </observers>
            </customer_login>
            <controller_action_predispatch>
                <observers>
                    <apdinteract_controller_action_predispatch>
                        <type>singleton</type>
                        <class>ApdInteract_Customer_Model_Observer</class>
                        <method>redirectToChangePass</method>
                    </apdinteract_controller_action_predispatch>
                </observers>
            </controller_action_predispatch>
        </events>
    </global>
    <frontend>
        <routers>
            <customer>
                <args>
                    <modules>
                        <apdinteract_customer before="Mage_Customer">ApdInteract_Customer</apdinteract_customer>
                    </modules>
                </args>
            </customer>
        </routers>
    </frontend>
</config>
